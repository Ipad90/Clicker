{"ast":null,"code":"import _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\orderbooks\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\orderbooks\\\\src\\\\orderbookBitstamp.js\";\nimport React, { useState, useEffect } from 'react';\n\nconst BitstampOrderBook = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        orders = _useState2[0],\n        setOrders = _useState2[1];\n\n  const currencyPair = 'btcusd';\n  const currencyArray = currencyPair.toUpperCase().match(/.{1,3}/g);\n  useEffect(() => {\n    const subscribe = {\n      event: 'bts:subscribe',\n      data: {\n        channel: `order_book_${currencyPair}`\n      }\n    };\n    const ws = new WebSocket('wss://ws.bitstamp.net');\n\n    ws.onopen = () => {\n      ws.send(JSON.stringify(subscribe));\n    };\n\n    ws.onmessage = event => {\n      const response = JSON.parse(event.data);\n      setOrders(response.data);\n      console.log(response);\n    };\n\n    ws.onclose = () => {\n      ws.close();\n    };\n\n    return () => {\n      ws.close();\n    };\n  }, [currencyPair]);\n  const bids = orders.bids,\n        asks = orders.asks;\n\n  const orderRows = array => array && array.map((item, index) => React.createElement(\"tr\", {\n    key: index,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, item[1]), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, item[0])));\n\n  const orderHead = title => React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    colSpan: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, title)), React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Amount (\", currencyArray[0], \")\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Price (\", currencyArray[1], \")\")));\n\n  const getPairs = () => {\n    const fillables = [1, 2, 3, 4, 5];\n    document.getElementById('pairs');\n    fillables.forEach(item => {});\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    id: \"pairs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Pepega\")), React.createElement(\"div\", {\n    className: \"order-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, orderHead('Bids'), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, orderRows(bids))), React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, orderHead('Asks'), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, orderRows(asks)))));\n};\n\nexport default BitstampOrderBook;","map":{"version":3,"sources":["C:/xampp/htdocs/orderbooks/src/orderbookBitstamp.js"],"names":["React","useState","useEffect","BitstampOrderBook","orders","setOrders","currencyPair","currencyArray","toUpperCase","match","subscribe","event","data","channel","ws","WebSocket","onopen","send","JSON","stringify","onmessage","response","parse","console","log","onclose","close","bids","asks","orderRows","array","map","item","index","orderHead","title","getPairs","fillables","document","getElementById","forEach"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst BitstampOrderBook = () => {\r\n    const [orders, setOrders] = useState([]);\r\n    const currencyPair = 'btcusd';\r\n    const currencyArray = currencyPair.toUpperCase().match(/.{1,3}/g);\r\n\r\n    useEffect(() => {\r\n        const subscribe = {\r\n            event: 'bts:subscribe',\r\n            data: {\r\n                channel: `order_book_${currencyPair}`\r\n            }\r\n        }\r\n        const ws = new WebSocket('wss://ws.bitstamp.net');\r\n\r\n        ws.onopen = () => {\r\n            ws.send(JSON.stringify(subscribe));\r\n        };\r\n\r\n        ws.onmessage = (event) => {\r\n            const response = JSON.parse(event.data);\r\n            setOrders(response.data);\r\n            console.log(response);\r\n        }\r\n\r\n        ws.onclose = () => {\r\n            ws.close();\r\n        }\r\n\r\n        return () => {\r\n            ws.close();\r\n        }\r\n    }, [currencyPair]);\r\n\r\n    const { bids, asks } = orders;\r\n    const orderRows = (array) => array && array.map((item, index) => (\r\n        <tr key = {index}>\r\n            <td>{item[1]}</td>\r\n            <td>{item[0]}</td>\r\n        </tr>\r\n    ));\r\n    const orderHead = (title) => (\r\n        <thead>\r\n            <tr>\r\n                <th colSpan = '2'>{title}</th>\r\n            </tr>\r\n\r\n            <tr>\r\n                <th>Amount ({currencyArray[0]})</th>\r\n                <th>Price ({currencyArray[1]})</th>\r\n            </tr>\r\n        </thead>\r\n    );\r\n\r\n    const getPairs = () => {\r\n        const fillables = [1, 2, 3, 4, 5];\r\n        document.getElementById('pairs');\r\n        fillables.forEach((item) => {\r\n\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <select id = 'pairs'>\r\n                <option>Pepega</option>\r\n            </select>\r\n            <div className = 'order-container'>\r\n                <table>\r\n                    {orderHead('Bids')}\r\n                    <tbody>{orderRows(bids)}</tbody>\r\n                </table>\r\n\r\n                <table>\r\n                    {orderHead('Asks')}\r\n                    <tbody>{orderRows(asks)}</tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BitstampOrderBook;\r\n"]},"metadata":{},"sourceType":"module"}